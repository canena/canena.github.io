<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
    <!-- [docs]
        Welcome to our not-so-fancy inline tutorial. If you read this it's probably
        safe to assume you are interested in such things so have fun following our
        thoughts. This is *just* a content page, for more information on the overall
        approach of the site visit /home.
    -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="author" content="Martin Feineis">
    <meta name="creator" content="Canena">
    <meta name="description" content="A blog about life">
    <meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'sha256-YzxQZnYzEzF+cXKWurXLJQfpy1c+ScGqPeldlHJNbDk=' 'sha256-vvt4KWwuNr51XfE5m+hzeNEGhiOfZzG97ccfqGsPwvE='; style-src 'self' 'sha256-uD7ie2YbTG1HzuFUnelB4zEhDlR5sSiroNrWljEstxs='; connect-src 'self' https://api.github.com/repos/canena/canena.github.io/issues/17/comments ">
    <title>Stack To Elm Them All &bullet; CANENA</title>
    <script>
/*! hubjs stub */
(function(w,t){"use strict";function a(o,x){(o._||(o._=[])).push(x)}
function s(){return function f(){a(f,t.call(arguments))}}
w.Hub=w.Hub||{config:s(),log:s(),use:s()};}(self,[].slice))
    </script>
    <link href="/cdn/common.dev.css" rel="stylesheet" type="text/css">
    <script async type="module" src="/_includes/include.js"></script>
</head>
<body>
    <script defer src="/cdn/config.js"></script>
    <script defer type="module" src="/cdn/ca/requires.js"></script>
    <script defer type="module" src="/cdn/site.js"></script>

    <ca-requires elements="fx-toggle gh-comments logo-switcher reading-meta reading-progress scroll-behavior"></ca-requires>
    <ca-scroll-behavior></ca-scroll-behavior>

    <header {cover} class="bg-sky-400 h-golden">
        <nav>
            <a {box} href="/" title="Return to home page">
                <img is-logo class="invert" src="/cdn/canena.svg" width="95" height="30" alt="CANENA">
            </a>
        </nav>
        <div {center} {cover.art}>
            <div {box} class="backdrop-blur text-white">
                <h1 class="capitalize">Stack To Elm Them All</h1>
                <h2 class="capitalize italic">Ever wondered - or forgot - how to build the Elm Compiler?</h2>
                <div class="flex gap-2">
                    <p class="whitespace-nowrap">2018-09-07</p>
                    <ca-reading-meta class="italic"></ca-reading-meta>
                </div>
                <ul class="list-none flex gap-2">
                    <li><a class="tag" href="/tags#elm">elm</a></li>
                    <li><a class="tag" href="/tags#tech">tech</a></li>
                </ul>
            </div>
        </div>
    </header>

    <main>
        <div class="bg-gradient-subtle">
            <div {center} class="bg-default">
                <article {box}>

                    <p>Ever wondered - or forgot - how to build the <a href="https://github.com/elm/compiler" target="_blank" rel="noopener noreferrer">Elm Compiler</a> with tracing using <a href="https://docs.haskellstack.org" target="_blank" rel="noopener noreferrer">Haskell Stack</a>? Here's how you do it</p>
                    <p>Init with stack</p>
                    <pre><code>stack init --resolver lts-11.20</code></pre>
                    <p>Add options in <code>elm.cabal</code>:</p>
                    <pre><code><span class="code:attribute">Executable</span> elm
    if flag(dev)
        ghc-options: -O0 -Wall -W<span class="code:literal">error</span> -rtsopts -eventlog</code></pre>
                    <p>Build with stack:</p>
                    <pre><code>stack build --flag elm:dev --profile</code></pre>
                    <p>Run with RTS options:</p>
                    <pre><code>elm make ./src/Main.elm \
    --output=./dist/app.js +RTS -xc -lu -RTC \
        2&gt;eventlog_readable.log</code></pre>
                    <p>This is essentially just a reminder for me on how to do it that I wanted to preserve from death-by-slack-history.</p>
                    <h3>Might also be useful</h3>
                    <pre><code>lsb_release -a
uname -a
stack --version</code></pre>

                </article>
            </div>

            <div {center} class="bg-default">
                <hr>
                <ca-gh-comments {box} issue="https://api.github.com/repos/canena/canena.github.io/issues/17">
                    <h4 comments-heading>Comments</h4>
                    <p>
                        The comments for this post are available on <a href="https://github.com/canena/canena.github.io/issues/17" target="_blank" rel="noopener noreferrer">this issue on GitHub</a>.
                        Feel free to engage in conversation over there.
                    </p>
                    <include-partial href="/_includes/comment-section.html"></include-partial>
                </ca-gh-comments>
            </div>

            <footer {center} {billboard}="dots" class="border-t">
                <nav class="px-2 pb-20">
                    <include-partial href="/_includes/footer-links.html"></include-partial>
                </nav>
            </footer>
        </div>
    </main>

    <nav class="floaty-nav | fixed bottom-0 w-full">
        <include-partial href="/_includes/floaty-nav-article.html"></include-partial>
        <include-partial href="/_includes/floaty-nav-body.html"></include-partial>
    </nav>

    <script defer src="/deps/hubjs/hub.dev.js"></script>
</body>
</html>
