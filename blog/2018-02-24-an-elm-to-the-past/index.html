<!DOCTYPE html><html lang="en" class="ui-layout"><head><meta charset="utf-8"><title>An Elm to the Past - A blog about life - CANENA</title><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1.0, minimum-scale=1.0"/><link rel="stylesheet" type="text/css" href="../../style/main.css?v1"></head><body class="ui-theme ui-theme--canena"><div class=unstyled><style></style><header class="unstyled ui-layout__header"><nav><ul class="ui-layout__content ui-header"><li class="ui-header__menu-item x-ui-header__menu-item--active"><div class=ui-header__menu-category>Music/Life</div><a class=ui-header__logo href=/ >CANENA</a></li></ul></nav></header><main class="unstyled ui-layout__main"><article><header class=unstyled><div class="unstyled ui-intro"><div class=ui-layout__content><h1 class=ui-intro__label>An Elm to the Past <span class=ui-intro__sub-label>Bringing Elm 0.18 to IE8+</span></h1></div></div><div class="unstyled ui-layout__content"><div class=ui-frontmatter><div class=ui-user><img class=ui-user__avatar alt="Closeup image of the author" src=../../img/ich3.jpg></div><div class=ui-frontmatter__properties>This line is not that useful right now...</div><div class=ui-frontmatter__tags><div class="ui-tag ui-tag--plain"><span class=ui-tag__label>Elm</span></div><div class="ui-tag ui-tag--plain"><span class=ui-tag__label>LegacyCode</span></div><div class="ui-tag ui-tag--plain"><span class=ui-tag__label>Tech</span></div><div class="ui-tag ui-tag--plain"><span class=ui-tag__label>Web</span></div></div><div class=ui-frontmatter__abstract></div></div></div><div class="unstyled ui-layout__content"><div class=ui-grid__row><div class=ui-grid__col-12><h2></h2><div class=ui-abstract><div class=ui-abstract__content>This post is a complete run-down of bringing an Elm 0.18 app to the ancient past a.k.a. IE8+.</div></div></div></div></div></header><div class="unstyled ui-layout__content"><div class="unstyled ui-content"><p>This blog post compiles the advice I posted in <a href=https://discourse.elm-lang.org/t/elm-support-for-older-browsers-ie-9-10/744/6>a discussion on Elm Discourse </a>on support of Elm for older browsers and is pretty much reproduced verbatim, thanks to the power Markdown.</p><p>I've put all the information in here to good use so head to <a href=https://github.com/mfeineis/elm-legacy-browser-setup>https://github.com/mfeineis/elm-legacy-browser-setup </a>if you want to see some code right away. I even managed to bring support for IE8+, which I didn't expect, tbh.</p><h3>Original Post Gist</h3><p>"Is there an official list of supported browsers for Elm? If not, what is the oldest browser you’ve tested Elm against? Lastly, is there a way to make Elm work on at least IE9 and IE10?"</p><h3>TL;DR</h3><p>if you have a valid HTML5 doctype and the mentioned polyfills in place an Elm program should run without problems in IE9+, iff you don't have any other ancient JS lingering around the same page that messes with global variables.</p><h3>The Long Version</h3><p>The following are potential issues I've dealt with in the past with ancient JS engines. This is a quick run-down I compiled while looking through the generated code of one of my small Elm projects.</p><p>Low hanging fruit that is easily polyfillable, remember to include these <em>before </em>including your elmish JS:</p><ul><li><code>console.log</code> doesn't exist in IE if the devtools are not open so maybe include <a href=https://github.com/paulmillr/console-polyfill>a console polyfill </a>or write one yourself</li><li>IE lt 9 doesn't support <code>Array.prototype.indexOf()</code> -> <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf>MDN polyfill</a></li><li><code>String.prototype.trim</code> is not supported in IE lt 9 so use another <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trim>MDN polyfill </a>to support that</li><li><code>JSON.stringify/JSON.parse</code> are IE8+ -> <a href=https://www.json.org/ >www.json.org has you covered</a></li></ul><p>Potential show-stoppers for IE lt 9:</p><ul><li>IE lt 9 doesn't have the proper W3C event model so <code>event.stopPropagation</code> , <code>event.stopImmediatePropagation</code> , <code>event.preventDefault</code> might be problematic, I'm not sure whether this is polyfillable without patching the kernel JS dealing with events that comes with <code>elm-lang/virtual-dom</code></li><li>IE lt 9 doesn't support <code>EventTarget.addEventListener/EventTarget.removeEventListener</code></li></ul><p>Not sure but might be problematic:</p><ul><li>I'm not sure about keywords as labels, in my code there is a <code>get:</code> label in <code>_elm_lang$core$Dict$get</code> , that could be an issue in older browsers - <code>get</code> isn't a keyword but in ES5 is used to define a getter so I wouldn't put it beyond IE to make a fuss about that</li><li>I loosely remember <code>document.createDocumentFragment</code> only being IE8+ but MDN says IE supports it all the way</li></ul><p>Non-issues:</p><ul><li>the JS has a <code>setTimeout</code> powered fallback for <code>requestAnimationFrame</code> so a polyfill doesn't seem necessary after all</li><li><code>"use strict";</code> is IE8+ but falls back gracefully so that shouldn't be a problem</li></ul><p>Trivia:</p><p>The generated JS isn't that idiomatic especially with the usage of the curlies on the next line and the variable declarations that make the impression that JS has block scope where it actually has function scope. There are also a lot of unguarded <code>for (... in ...)</code> traversals that might throw off older IE, even more so if other JS lives on the same site that potentially modifies shared globals.</p><h3>General Advice:</h3><p>Don't trust IE :-), no, seriously, don't trust it. Microsoft did a good job in keeping most of the behavior of their old JScript engine versions in their compatibility mode, kudos to the team that had that miserable job on their plate. The problems arise with the combinatorial explosion of the various document modes and their interaction with the legacy engines that are being carried around since days of yore. Multiply that by the fact that an IE version potentially behaves different on every major windows version, times the supported architectures. To sum up: the engine recreation is pretty good but the host objects and especially the document models will haunt you forever. My advice for managment still stands: if even Microsoft isn't supporting IE lt 11, why should you? Usually numbers work better with management, so my anecdotal tally is</p><p>1.5 * (time spent on all evergreen browsers combined) (lte) time spent on keeping IE supported</p><p>, so go figure.</p><h3>EDIT</h3><p>I created a <a href=https://github.com/mfeineis/elm-legacy-browser-setup>small but useful example project </a>based on the advice given in this article. The README should fill in the blanks.</p></div></div></article></main><footer class="unstyled ui-outro"><div class=ui-layout__content><section class=ui-grid__row><div class=ui-grid__col-8><h4>About the author</h4><p>I love listening to and making music myself, enjoy reading, get excited when watching a decent movie, flourish in creating artwork, marvel in coding and grocking other people's code and delight in learning anything new in general while living The Dream in the beautiful city of Leipzig, Germany. <a class=unstyled href=/blog/about>Do you want to know more?</a></p></div><nav class=ui-grid__col-4><h4>Sitemap</h4><ul><li><a class=unstyled href=/ >Home </a>• <a class=unstyled href=/#posts>Posts </a>• <a class=unstyled href=/#links>Links</a></li><li><a class=unstyled href=/blog/about>About </a>• <a class=unstyled href=/blog/about#contact>Contact Me</a></li><li><a class=unstyled href=/blog/about#impressum>Impressum</a></li></ul></nav></section><section class=ui-outro__section><div class=ui-grid__row><div class=ui-grid__col-8><p class=ui-outro__punchline>Proudly powered by Elm-generated static web pages</p></div><div class=ui-grid__col-4><p class=ui-outro__copyright>© 2019 CANENA - All rights reserved</p></div></div></section></div></footer></div><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs2015.min.css"><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script></body></html>