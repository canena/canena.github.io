<!doctype html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="author" content="Martin Feineis"><meta name="creator" content="Canena"><meta name="description" content="A blog about life"><meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1.0, minimum-scale=1.0"><title>An Elm to the Past | Canena</title><link href="/normalize-8.0.1.css" rel="stylesheet" type="text/css"><link href="/styles.css?v1" rel="stylesheet" type="text/css"><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/styles/xcode.min.css" rel="stylesheet" type="text/css" integrity="sha256-fjO4CUN/XJTfsDmlIBojCwY4EV94jfOJpPzqd19TSko=" crossorigin="anonymous"><style>body {
    color:#333333;
    font-display:swap;
    font-family:Roboto Condensed, Arial, sans-serif;
    font-size:18px;
    line-height:1.4em;
    margin:0px;
    padding:0px;
}

a {
    color:#ff6600;
    text-decoration:underline;
}

a:hover {
    color:#e32636;
    text-decoration:none;
}

code {
    font-family:Inconsolata, monospace;
    background-color:#fdfdfd !important;
    border:1px solid #d6d6d6;
}

pre  code {
    overflow-x:scroll !important;
}

h1, h2, h3, h4, h5, h6 {
    font-family:Roboto Condensed, Helvetica, Arial, sans-serif;
}

small {
    font-size:65%;
}

.intro {
    margin-top:4px;
}

.header {
    background-image:linear-gradient(142deg, #d84b97, #ff4400);
    border-bottom:4px solid #e32636;
    padding-top:4px;
    overflow:hidden;
}

.header__content {
    margin:0 auto;
    max-width:900px;
    min-width:280px;
    padding-left:20px;
    padding-right:20px;
}

.header__logo {
    display:inline-block;
    line-height:70px;
    text-align:center;
}

@media only screen and (min-width: 600px) {
    .header__logo {
        text-align:left;
    }
}

.header__logo  a {
    color:#ffffff;
    font-weight:bold;
    text-transform:uppercase;
}

.header__navigation {
    float:right;
    line-height:70px;
    text-align:center;
}

@media only screen and (min-width: 600px) {
    .header__navigation {
        text-align:left;
    }
}

.header__navigation  ul {
    list-style:none;
    margin:0;
    padding:0;
}

.header__navigation  li {
    display:inline-block;
    padding-left:1em;
}

.header__navigation  a {
    color:#ffffff;
    font-weight:bold;
    text-transform:uppercase;
}

.main {
    max-width:100vw;
}

.main__content {
    margin:50px auto 0 auto;
    max-width:900px;
    min-width:280px;
    padding-left:20px;
    padding-right:20px;
}

.footer  svg {
    padding-right:5px;
    vertical-align:baseline;
}

.footer__content {
    border-color:#e0e0e0;
    border-style:solid;
    border-width:1px 0 0 0;
    margin:0 auto;
    max-width:900px;
    min-width:280px;
    padding-left:20px;
    padding-right:20px;
}

.footer__content--highlighted {
    border-color:#ff6600;
    border-style:dotted;
}

.footer__copyright {
    display:block;
    padding-bottom:1em;
    padding-top:1em;
    text-align:center;
}

@media only screen and (min-width: 600px) {
    .footer__copyright {
        display:inline-block;
    text-align:left;
    }
}

.footer__acknowledgements {
    display:block;
    padding-bottom:1em;
    padding-top:1em;
    text-align:center;
}

@media only screen and (min-width: 600px) {
    .footer__acknowledgements {
        float:right;
    overflow:hidden;
    text-align:right;
    }
}

.footer__navigation {
    text-align:center;
}

@media only screen and (min-width: 600px) {
    .footer__navigation {
        text-align:left;
    }
}

.footer__navigation  ul {
    list-style:none;
    margin:0;
    padding:0;
}

.footer__navigation  li {
    display:inline-block;
    line-height:70px;
    padding-right:1em;
}

.footer__avatar {
    border-radius:60px;
    float:right;
    margin-bottom:10px;
    margin-left:10px;
}

.post-list {
    list-style:none;
    margin-top:45px;
    padding-left:0;
}

.post-list__item {
    display:block;
    padding-left:0;
    margin-bottom:45px;
}

.post-metadata {
    margin-top:-0.5em;
    margin-bottom:2em;
}

.post-metadata  a, .post-metadata  span {
    display:inline-block;
    margin-right:5px;
}

.post-metadata  a {
    border:1px solid #e0e0e0;
    border-radius:5px;
    border-top-left-radius:0;
    background-color:#d84b97;
    color:#ffffff;
    padding-left:5px;
    padding-right:5px;
}</style><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js" integrity="sha256-js+I1fdbke/DJrW2qXQlrw7VUEqmdeFeOW37UC0bEiU=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages/elm.min.js" integrity="sha256-5ZDjmDRr7i9DNIGlJKzPImNcoVZ2KGsPch+qoZuYq5M=" crossorigin="anonymous"></script><script>hljs.initHighlightingOnLoad();</script><script>var requirejs = { baseUrl: "js", paths: { greeshka: "libs/greeshka-0.3.0" } };</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha256-1fEPhSsRKlFKGfK3eO710tEweHh1fwokU5wFGDHO+vg=" crossorigin="anonymous"></script><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed|Inconsolata" rel="stylesheet" type="text/css"></head><body><div class="header"><div class="header__content"><div class="header__logo"><a href="/" title="Canena blog">Canena</a></div><div class="header__navigation"><ul><li><a href="/posts">Posts</a></li><li><a href="/about">About</a></li></ul></div></div></div><div class="main"><div class="main__content"><h1>An Elm to the Past</h1><div class="post-metadata"><span>2018-02-24</span><span>•</span><a href="/tags/elm">elm</a><a href="/tags/legacy-code">legacy-code</a><a href="/tags/tech">tech</a><a href="/tags/web">web</a></div><div class="markdown"><p>This blog post compiles the advice I posted in
<a href="https://discourse.elm-lang.org/t/elm-support-for-older-browsers-ie-9-10/744/6">a discussion on Elm Discourse</a>
on support of Elm for older browsers and is pretty much reproduced verbatim, thanks to the power Markdown.</p>
<p>I’ve put all the information in here to good use so head to
<a href="https://github.com/mfeineis/elm-legacy-browser-setup">https://github.com/mfeineis/elm-legacy-browser-setup</a>
if you want to see some code right away. I even managed to bring support for IE8+, which I didn’t expect, tbh.</p>
<h2 id="original-post-gist">Original Post Gist</h2>
<p>“Is there an official list of supported browsers for Elm? If not, what is the oldest browser you’ve tested Elm against? Lastly, is there a way to make Elm work on at least IE9 and IE10?”</p>
<h2 id="tl-dr">TL;DR</h2>
<p>if you have a valid HTML5 doctype and the mentioned polyfills in place an Elm program should run without problems in IE9+, iff you don’t have any other ancient JS lingering around the same page that messes with global variables.</p>
<h2 id="the-long-version">The Long Version</h2>
<p>The following are potential issues I’ve dealt with in the past with ancient JS engines. This is a quick run-down I compiled while looking through the generated code of one of my small Elm projects.</p>
<p>Low hanging fruit that is easily polyfillable, remember to include these <em>before</em> including your elmish JS:</p>
<ul>
<li><code>console.log</code> doesn’t exist in IE if the devtools are not open so maybe include <a href="https://github.com/paulmillr/console-polyfill">a console polyfill</a> or write one yourself</li>
<li>IE lt 9 doesn’t support <code>Array.prototype.indexOf()</code> -&gt; <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf">MDN polyfill</a></li>
<li><code>String.prototype.trim</code> is not supported in IE lt 9 so use another <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trim">MDN polyfill</a> to support that</li>
<li><code>JSON.stringify/JSON.parse</code> are IE8+ -&gt; <a href="https://www.json.org/">www.json.org has you covered</a></li>
</ul>
<p>Potential show-stoppers for IE lt 9:</p>
<ul>
<li>IE lt 9 doesn’t have the proper W3C event model so <code>event.stopPropagation</code>, <code>event.stopImmediatePropagation</code>, <code>event.preventDefault</code> might be problematic, I’m not sure whether this is polyfillable without patching the kernel JS dealing with events that comes with <code>elm-lang/virtual-dom</code></li>
<li>IE lt 9 doesn’t support <code>EventTarget.addEventListener/EventTarget.removeEventListener</code></li>
</ul>
<p>Not sure but might be problematic:</p>
<ul>
<li>I’m not sure about keywords as labels, in my code there is a <code>get:</code> label in <code>_elm_lang$core$Dict$get</code>, that could be an issue in older browsers - <code>get</code> isn’t a keyword but in ES5 is used to define a getter so I wouldn’t put it beyond IE to make a fuss about that</li>
<li>I loosely remember <code>document.createDocumentFragment</code> only being IE8+ but MDN says IE supports it all the way</li>
</ul>
<p>Non-issues:</p>
<ul>
<li>the JS has a <code>setTimeout</code> powered fallback for <code>requestAnimationFrame</code> so a polyfill doesn’t seem necessary after all</li>
<li><code>"use strict";</code> is IE8+ but falls back gracefully so that shouldn’t be a problem</li>
</ul>
<p>Trivia:</p>
<p>The generated JS isn’t that idiomatic especially with the usage of the curlies on the next line and the variable declarations that make the impression that JS has block scope where it actually has function scope. There are also a lot of unguarded <code>for (... in ...)</code> traversals that might throw off older IE, even more so if other JS lives on the same site that potentially modifies shared globals.</p>
<h2 id="general-advice-">General Advice:</h2>
<p>Don’t trust IE :-), no, seriously, don’t trust it. Microsoft did a good job in keeping most of the behavior of their old JScript engine versions in their compatibility mode, kudos to the team that had that miserable job on their plate. The problems arise with the combinatorial explosion of the various document modes and their interaction with the legacy engines that are being carried around since days of yore. Multiply that by the fact that an IE version potentially behaves different on every major windows version, times the supported architectures. To sum up: the engine recreation is pretty good but the host objects and especially the document models will haunt you forever. My advice for managment still stands: if even Microsoft isn’t supporting IE lt 11, why should you? Usually numbers work better with management, so my anecdotal tally is</p>
<blockquote>
<p>1.5 * (time spent on all evergreen browsers combined) (lte) time spent on keeping IE supported</p>
</blockquote>
<p>, so go figure.</p>
<h2 id="edit">EDIT</h2>
<p>I created a <a href="https://github.com/mfeineis/elm-legacy-browser-setup">small but useful example project</a>
based on the advice given in this article. The README should fill in the blanks.</p>
</div></div></div><div class="footer"><div class="footer__content footer__content--highlighted"><h2>About the author</h2><p style="overflow: hidden"><img alt="Author's blog" class="footer__avatar" src="/img/ich3.jpg" width="120">
I love listening to and making music myself, enjoy reading, get excited when watching a decent movie, flourish in creating artwork, marvel in coding and grocking other people's code and delight in learning anything new in general while living The Dream in the beautiful city of Leipzig, Germany.
                    </p></div><div class="footer__content"><div class="footer__navigation"><ul><li><a href="/posts">Posts</a></li><li><a href="/about">About</a></li><li><a href="/posts/2017-03-20-epic-links">Links</a></li><li><a href="/about#contact">Contact</a></li><li><a href="/about#impressum">Impressum</a></li></ul></div></div><div class="footer__content"><div class="footer__copyright">© 2019 CANENA - All rights reserved</div><div class="footer__acknowledgements"><a href="https://www.npmjs.com/package/elmstatic">Created with Elmstatic</a></div></div></div></body></html>